<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <title>Front End Cannon</title>

    <script src="http://code.jquery.com/jquery-1.5.min.js"></script>

    <!-- Import EaselJS Framework -->
    <script type="text/javascript" src="js/easeljs/utils/UID.js"></script>
    <script type="text/javascript" src="js/easeljs/display/SpriteSheet.js"></script>
    <script type="text/javascript" src="js/easeljs/display/SpriteSheetUtils.js"></script>
    <script type="text/javascript" src="js/easeljs/display/Shadow.js"></script>
    <script type="text/javascript" src="js/easeljs/geom/Matrix2D.js"></script>
    <script type="text/javascript" src="js/easeljs/events/MouseEvent.js"></script>
    <script type="text/javascript" src="js/easeljs/display/DisplayObject.js"></script>
    <script type="text/javascript" src="js/easeljs/display/Container.js"></script>
    <script type="text/javascript" src="js/easeljs/display/Stage.js"></script>
    <script type="text/javascript" src="js/easeljs/display/Graphics.js"></script>
    <script type="text/javascript" src="js/easeljs/display/Bitmap.js"></script>
	<script type="text/javascript" src="js/easeljs/display/BitmapSequence.js"></script>
    <script type="text/javascript" src="js/easeljs/display/Text.js"></script>
    <script type="text/javascript" src="js/easeljs/utils/Ticker.js"></script>
    <!-- End EaselJS Imports -->

    <!-- OPEN PROJECT IN WEBSTORM FOR EASY EDITING -->
    <!-- http://www.jetbrains.com/webstorm/ -->

    <script type="text/javascript" src="js/Enemy.js"></script>

    <script type="text/javascript">


        var TIME_TO_NEXT_ENEMY = 25;
        var DIFFICULTY = 0.95;

        var currentFrame = 0;

        var canvas;
        var stage;

        var enemyImage;
        var enemySpriteSheet;

        var scoreField;

        var enemyArray;
        var bulletArray;

        var isAlive;

        var timeToNextEnemy;

        //handle keystrokes!
        document.onkeyup      = handleKeyUp;
        document.onkeydown  = handleKeyDown;

        function init() {
            canvas  =   document.getElementById("myCanvas");
            stage   =   new Stage(canvas);

            scoreField = new Text("0", "bold 12px Arial", "#FFFFFF");
            scoreField.textAlign = "right";
            scoreField.x = canvas.width - 10;
            scoreField.y = 22;

            initImages();
        }

        function initImages()
        {
            $(function() {
                enemyImage = new Image();
				enemyImage.onload = spriteSheetLoaded;
                enemyImage.src = "img/enemy.png";

            });
        }

        function watchRestart()
        {
            //watch for clicks
            stage.update(); 	//update the stage to show text
            canvas.onclick = handleClick;
        }

        function handleClick()
        {
            canvas.onclick = null;
            restart();
        }

        function spriteSheetLoaded()
        {
            enemySpriteSheet = new SpriteSheet( enemyImage, 100, 100)
            restart();
        }

        function restart()
        {
            //hide objects on stage and add score
            stage.removeAllChildren();
            scoreField.text = (0).toString();
            stage.addChild(scoreField);

            //create new arrays
            enemyArray =   new Array();
            bulletArray =    new Array();

            //player
            isAlive = true;

            //time until attacks
            timeToNextEnemy = TIME_TO_NEXT_ENEMY;
            nextEnemy = 0;

            //start game ticker
            Ticker.addListener(window);
        }

        <!-- main game loop -->

        function tick()
        {
            if(nextEnemy <= 0)
            {
                if(isAlive)
                {
                    timeToNextEnemy *= DIFFICULTY;	//reduce spaceRock spacing slowly to increase difficulty with time
                    getEnemy();
                    //enemyArray[index].floatOnScreen(canvas.width, canvas.height);
                    nextEnemy = timeToNextEnemy + timeToNextEnemy*Math.random();
                }
            } else {
                nextEnemy--;
            }

            stage.update();
        }

        function getEnemy()
        {
            var i = 0;
            var len = enemyArray.length;

            //pooling approach

           while(i <= len)
            {
                if( !enemyArray[i] )
                {
                    enemyArray[i] = new Enemy( enemySpriteSheet );
                    break;
                } else if(!enemyArray[i].active) {
                    enemyArray[i].activate();
                    break;
                } else {
                    i++;
                }
            }

            if(len == 0) {
                enemyArray[0] = new Enemy( enemySpriteSheet );
            }

            stage.addChild(enemyArray[i]);

//            return enemyArray[i];
        }

        function killEnemy( enemy )
        {
            var i = 0;
            var len = enemyArray.length;

            //pooling approach

           while(i <= len)
           {
               if( enemyArray[i] === enemy )
               {
                   stage.removeChild( enemy );
                   enemy.tick = null;
                   enemyArray.splice(i,1);
                   return;
               }
               i++;
           }

        }



        <!-- events and such -->

        function handleCanvasClick() {
            
        }

        function handleKeyUp() {

        }

        function handleKeyDown() {

        }

    </script>

</head>
<body onload="init();">
	<div class="canvasHolder" style="background-color:#000000; height:600px; width:980px; position:relative; float:left;">
		<canvas style="position:absolute; float:left" id="myCanvas" width="980px" height="600px"></canvas>
	</div>

    <!--<div style="display:none;">-->
        <!--<img src="img/enemy.png" id="enemyImage"/>-->
    <!--</div>-->
</body>
</html>